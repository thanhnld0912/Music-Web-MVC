@using MusicWebMVC.Helpers
@using MusicWebMVC.ViewModels
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@model PagedResult<PostViewModel>
@{
}
<div class="post-management">
    <h2>Manage</h2>
    <table class="post-table">
        <thead>
            <tr>
                <th>Username</th>
                <th>Title</th>
                <th>Song</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            @if (Model?.Items != null && Model.Items.Any())
            {
                @foreach (var post in Model.Items)
                {
                    <tr>
                        <td>@post.Username</td>
                        <td>@post.Title</td>
                        <td>
                            @if (post.Status.Equals("yes", StringComparison.OrdinalIgnoreCase))
                            {
                                <i class="fas fa-check-circle" style="color: green"></i>
                            }
                            else
                            {
                                <i class="fas fa-times-circle" style="color: red;"></i>
                            }
                        </td>
                    <td>
                        <button class="btn report">View Report</button>
                        <button class="btn delete" onclick="confirmModal(@post.Id)">Delete</button>
                        <button class="btn more">More</button>
                    </td>
                </tr>
                }
            }
            else
            {
            <tr>
                <td colspan="5">No posts found.</td>
            </tr>
            }
        </tbody>
    </table>

    <div class="pagination">
        @if (Model?.HasPrevious == true)
        {
            <button class="page-redirect-btn" onclick="window.location.href='@Url.Action("Post", "Admin", new { page = Model.CurrentPage - 1 })'">
                &laquo;
            </button>
        }

        @for (int i = 1; i <= Model?.TotalPages; i++)
        {
            <button class="page-btn @(i == Model.CurrentPage ? "active" : "")"
                    onclick="window.location.href='@Url.Action("Post", "Admin", new { page = i})'">
                @i
            </button>
        }

        @if (Model?.HasNext == true)
        {
            <button class="page-redirect-btn" onclick="window.location.href='@Url.Action("Post", "Admin", new { page = Model.CurrentPage + 1 })'">
                &raquo;
            </button>
        }
    </div>
</div>